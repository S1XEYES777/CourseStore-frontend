<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Course Store ‚Äî –ì–ª–∞–≤–Ω–∞—è</title>

    <link rel="stylesheet" href="assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- ================= HEADER ================= -->
<header class="site-header">
    <div class="container navbar">

        <div class="logo">
            <span>CS</span> Course Store
        </div>

        <nav class="nav-links">
            <a href="index.html" class="active">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a>
            <a href="cart.html">–ö–æ—Ä–∑–∏–Ω–∞</a>
            <a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a>
            <a href="login.html">–í–æ–π—Ç–∏</a>
        </nav>

    </div>
</header>


<!-- ================= HERO ================= -->
<section class="hero">
    <div class="container hero-layout">

        <div class="hero-left">
            <h1 class="hero-title">
                –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤<br><span>Course Store</span> üéì
            </h1>

            <p class="hero-subtitle">
                –£—á–∏—Ç–µ—Å—å –æ–Ω–ª–∞–π–Ω ‚Äî –±—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.<br>
                –ü–æ–ª—É—á–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –∫—É—Ä—Å–∞–º –æ—Ç –ª—É—á—à–∏—Ö –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π.
            </p>
        </div>

        <div class="hero-image">
            <img src="assets/hero.png" alt="" style="width:100%; border-radius:14px;">
        </div>

    </div>
</section>


<!-- ================= –ü–û–ü–£–õ–Ø–†–ù–´–ï –ö–£–†–°–´ ================= -->
<section class="section">
    <div class="container">

        <div class="section-header">
            <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
            <p class="section-subtitle">–¢–æ–ø-4 –∫—É—Ä—Å–∞ –Ω–µ–¥–µ–ª–∏</p>
        </div>

        <div class="course-grid" id="popular-courses"></div>

    </div>
</section>


<!-- ================= FOOTER ================= -->
<footer class="site-footer">
    ¬© 2025 Course Store ‚Äî –£—á–∏—Å—å. –†–∞–∑–≤–∏–≤–∞–π—Å—è. –î–æ—Å—Ç–∏–≥–∞–π.
</footer>

<script src="assets/script.js"></script>

<script>
// ================================
// üìå –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
// ================================
async function loadPopularCourses() {
    try {
        const res = await fetch(`${API}/api/courses`);
        const data = await res.json();
        const grid = document.getElementById("popular-courses");
        grid.innerHTML = "";

        if (data.status !== "ok" || !data.courses?.length) {
            grid.innerHTML = "<p class='section-subtitle'>–ü–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤.</p>";
            return;
        }

        // ‚ö° –ë–µ—Ä—ë–º —Ç–æ–ª—å–∫–æ 4 –∫—É—Ä—Å–∞
        data.courses.slice(0, 4).forEach(c => {

            // üî• image_url ‚Äî —Ç–µ–ø–µ—Ä—å –ü–û–õ–ù–ê–Ø —Å—Å—ã–ª–∫–∞, –Ω–µ –Ω–∞–¥–æ –¥–æ–±–∞–≤–ª—è—Ç—å API
            const imgSrc = c.image_url || "assets/default.jpg";

            const card = document.createElement("div");
            card.className = "course-card";

            card.innerHTML = `
                <div class="course-thumb">
                    <img src="${imgSrc}" alt="${c.title}">
                </div>

                <div class="course-body">
                    <span class="course-badge">–•–∏—Ç –Ω–µ–¥–µ–ª–∏</span>

                    <h3 class="course-title">${c.title}</h3>

                    <div class="course-meta">
                        <span>${c.author}</span>
                        <span class="course-price">${c.price} ‚Ç∏</span>
                    </div>
                </div>

                <div class="course-footer">
                    <a href="course.html?id=${c.id}" class="btn btn-primary btn-small">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </a>
                    <button class="btn btn-ghost btn-small buy-btn">–ö—É–ø–∏—Ç—å</button>
                </div>
            `;

            // –∫–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å" ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ—Ä–∑–∏–Ω—É
            card.querySelector(".buy-btn").onclick = () => {
                addToCart(c);
                showMessage("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É!", "success");
            };

            grid.appendChild(card);
        });

    } catch (err) {
        console.error("–û—à–∏–±–∫–∞:", err);
        document.getElementById("popular-courses").innerHTML =
            "<p class='section-subtitle'>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏.</p>";
    }
}

loadPopularCourses();
</script>

</body>
</html>
