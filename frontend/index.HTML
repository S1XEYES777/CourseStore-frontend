<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Course Store ‚Äî –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

<header>
    <div class="logo">Course Store</div>
    <nav>
        <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a href="cart.html">–ö–æ—Ä–∑–∏–Ω–∞</a>
        <a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a>
        <a href="login.html">–í–æ–π—Ç–∏</a>
    </nav>
</header>

<div class="container">
    <section class="hero">
        <h1 class="hero-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Course Store üéì</h1>
        <p class="hero-subtitle">
            –£—á–∏—Ç–µ—Å—å –æ–Ω–ª–∞–π–Ω ‚Äî –±—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.  
            –î–æ—Å—Ç—É–ø –∫ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –∫—É—Ä—Å–∞–º –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –Ω–µ —Ç–æ–ª—å–∫–æ.
        </p>
        <a href="catalog.html" class="hero-btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥—É</a>
    </section>

    <section>
        <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
        <div class="course-grid" id="popular-courses">
            <!-- –ö—É—Ä—Å—ã –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ backend -->
        </div>
    </section>

    <footer>
        ¬© 2025 Course Store. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
    </footer>
</div>

<script src="assets/script.js"></script>
<script>
async function loadPopularCourses() {
    try {
        const res = await fetch(`${API}/api/courses`);
        const data = await res.json();
        const grid = document.getElementById("popular-courses");
        grid.innerHTML = "";

        if (data.status !== "ok" || !data.courses?.length) {
            grid.innerHTML = "<p>–ü–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤.</p>";
            return;
        }

        // –ú–æ–∂–Ω–æ –≤–∑—è—Ç—å –ø–µ—Ä–≤—ã–µ 4 –∫—É—Ä—Å–∞ –∫–∞–∫ ‚Äú–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ‚Äù
        data.courses.slice(0, 4).forEach(course => {
            const card = document.createElement("div");
            card.className = "course-card";

            const imgSrc = course.image_url || "assets/default.jpg";

            card.innerHTML = `
                <img src="${imgSrc}" alt="">
                <div class="course-info">
                    <h3>${course.title}</h3>
                    <div class="course-author">–ê–≤—Ç–æ—Ä: ${course.author || "‚Äî"}</div>
                    <div class="course-desc">${(course.description || "").substring(0, 70)}...</div>
                    <div class="course-footer">
                        <div class="price">${course.price} ‚Ç∏</div>
                        <button class="btn btn-primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                    </div>
                </div>
            `;

            card.querySelector("button").onclick = () => {
                window.location.href = "catalog.html?id=" + course.id;
            };

            grid.appendChild(card);
        });
    } catch(e) {
        console.error(e);
    }
}

loadPopularCourses();
</script>

</body>
</html>
